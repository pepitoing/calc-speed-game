<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Calc Speed Challenge</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .fade-in { animation: fadeIn 0.4s ease; }
    @keyframes fadeIn { from {opacity:0; transform:scale(0.95);} to {opacity:1; transform:scale(1);} }

    .pulse-soft { animation: pulseSoft 1.5s infinite; }
    @keyframes pulseSoft {
      0%{box-shadow:0 0 0 0 rgba(34,197,94,.4);}
      70%{box-shadow:0 0 0 12px rgba(34,197,94,0);}
      100%{box-shadow:0 0 0 0 rgba(34,197,94,0);}
    }
  </style>
</head>

<body class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white min-h-screen flex flex-col">

<!-- HEADER -->
<header class="bg-slate-950 border-b border-slate-700 px-6 py-3 flex justify-between items-center">
  <div class="font-bold text-lg">⚡ Calc Speed Challenge</div>
  <button onclick="goDashboard()" class="text-sm text-slate-300 hover:text-white">Dashboard</button>
</header>

<!-- MAIN -->
<main class="flex-1 flex items-center justify-center px-4">

<!-- USERNAME SCREEN -->
<div id="username-screen" class="text-center fade-in">
  <h2 class="text-3xl font-bold mb-2">Welcome</h2>
  <p class="text-slate-300 mb-6">Enter your name to begin</p>

  <input id="username-input"
         class="p-3 rounded-lg text-black w-64 text-center"
         placeholder="Your name"
         onkeydown="if(event.key==='Enter') saveUsername()">

  <div class="mt-4">
    <button onclick="saveUsername()"
            class="bg-green-500 px-6 py-2 rounded-lg text-black hover:scale-105 transition">
      Start Game
    </button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden text-center fade-in space-y-5">
  <h2 id="welcome-text" class="text-2xl font-semibold"></h2>
  <div class="text-slate-300">Total Points: <span id="total-points" class="font-bold"></span></div>

  <div class="flex flex-col space-y-3 mt-4">
    <button onclick="showLevelMap()" class="bg-blue-500 px-6 py-3 rounded-lg hover:scale-105 transition">
      Practice Levels
    </button>

    <button onclick="startDailyQuiz()" class="bg-yellow-400 text-black px-6 py-3 rounded-lg hover:scale-105 transition">
      Quiz of the Day
    </button>

    <button onclick="showLeaderboard()" class="bg-purple-500 px-6 py-3 rounded-lg hover:scale-105 transition">
      Leaderboard
    </button>
  </div>
</div>

<!-- LEVEL MAP -->
<div id="level-map" class="hidden w-full max-w-md text-center fade-in">
  <h2 class="text-xl mb-4">Select Level</h2>
  <div id="levels-container" class="grid grid-cols-5 gap-3 mb-6"></div>

  <button onclick="goDashboard()" class="bg-gray-600 px-4 py-2 rounded-lg">Back</button>
</div>

<!-- GAME SCREEN -->
<div id="game-screen" class="hidden w-full max-w-xl fade-in">

  <!-- TOP BAR -->
  <div class="flex justify-between items-center mb-4">
    <div>
      <div id="level" class="text-lg font-semibold"></div>
      <div id="score" class="text-sm text-slate-300"></div>
      <div id="streak" class="text-xs text-orange-400"></div>
    </div>

    <!-- TIMER -->
    <div class="relative w-16 h-16">
      <svg class="transform -rotate-90" width="64" height="64">
        <circle cx="32" cy="32" r="28" stroke="#334155" stroke-width="6" fill="none"/>
        <circle id="timer-circle" cx="32" cy="32" r="28"
                stroke="#22c55e" stroke-width="6" fill="none"
                stroke-dasharray="176" stroke-dashoffset="0"
                class="pulse-soft"/>
      </svg>
    </div>
  </div>

  <!-- QUOTE -->
  <div id="quote" class="text-center text-slate-300 text-sm mb-3 italic">
    "Speed today, success tomorrow."
  </div>

  <!-- PROGRESS -->
  <div class="w-full bg-slate-700 rounded h-2 mb-5">
    <div id="progress-bar" class="bg-green-500 h-2 rounded transition-all"></div>
  </div>

  <!-- QUESTION CARD -->
  <div class="bg-white text-black rounded-2xl shadow-2xl px-8 py-10 text-center">

    <div id="question" class="text-4xl font-bold mb-6 tracking-wide">
      Loading…
    </div>

    <input id="answer"
           type="text"
           inputmode="numeric"
           pattern="[0-9]*"
           class="w-36 mx-auto block p-3 rounded-lg text-black text-center text-2xl border-2 border-slate-300 focus:outline-none focus:ring-2 focus:ring-green-400"
           placeholder="Answer"
           oninput="checkAnswer()"/>

    <!-- QUIT -->
    <button onclick="quitGame()"
            class="mt-6 text-sm text-slate-500 hover:text-red-500">
      ⛔ Quit Game
    </button>
  </div>
</div>

<!-- GAME OVER -->
<div id="game-over-screen" class="hidden text-center fade-in">
  <h2 class="text-3xl mb-3">Game Over</h2>
  <p id="final-score" class="mb-6 whitespace-pre-line"></p>

  <button onclick="goDashboard()"
          class="bg-blue-500 px-6 py-3 rounded-lg hover:scale-105 transition">
    Back to Dashboard
  </button>
</div>

<!-- LEADERBOARD -->
<div id="leaderboard-screen" class="hidden text-center fade-in">
  <h2 class="text-xl mb-4">Leaderboard</h2>
  <ul id="leaderboard-list" class="space-y-2 mb-6"></ul>

  <button onclick="goDashboard()" class="bg-gray-600 px-4 py-2 rounded-lg">Back</button>
</div>

</main>

<!-- FOOTER -->
<footer class="bg-slate-950 border-t border-slate-700 py-3 text-center text-xs text-slate-400">
  © 2026 Suraj Srivastav • Calc Speed Challenge
</footer>

<script src="/static/js/app.js"></script>
</body>
</html>
